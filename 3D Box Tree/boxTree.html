<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>My first three.js app</title>
		<style>
			body {
				margin: 0;
			}
			canvas {
				display: block;
			}
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
		<script src="js/orbitControls.js"></script>
		<script>
			// Our Javascript will go here.
			// RENDERER
			var renderer = new THREE.WebGLRenderer();
			renderer.setSize(
				window.innerWidth,
				window.innerHeight
			);
			renderer.setClearColor(0xeeeeee);
			document.body.appendChild(renderer.domElement);

			// TURN ON SHADOWS
			// WHICH ARE OFF BY DEFAULT
			renderer.shadowMap.enabled = true;
			renderer.shadowMap.type = THREE.PCFSoftShadowMap;

			// CAMERA
			var camera = new THREE.PerspectiveCamera(
				45,
				window.innerWidth / window.innerHeight,
				1,
				500
			);
			camera.position.set(0, 0, 50);
			camera.lookAt(0, 0, 0);

			// CAMERA CONTROL
			var controls = new THREE.OrbitControls(
				camera,
				renderer.domElement
			);
			controls.addEventListener("change", function () {
				renderer.render(scene, camera);
			});

			// SCENE
			var scene = new THREE.Scene();

			// A FLAT PLANE
			var plane = new THREE.Mesh(
				new THREE.PlaneGeometry(50, 50, 5, 5),
				new THREE.MeshBasicMaterial({
					color: 0x222222,
					wireframe: true,
				})
			);
			plane.rotateX(Math.PI / 2);

			// CUSTOM COLORS
			var lightOrange = new THREE.Color(
				"rgb(242, 204, 170)"
			);

			// FLOOR
			var geometry = new THREE.BoxGeometry(24, 30, 1);
			var material = new THREE.MeshBasicMaterial({
				color: lightOrange,
			});
			var cube = new THREE.Mesh(geometry, material);
			cube.position.y += 0.5;
			cube.rotation.x += Math.PI / 2;

			// OBJECT1
			var geometry1 = new THREE.OctahedronGeometry(2, 1);
			var material1 = new THREE.MeshStandardMaterial({
				color: 0xff0051,
				shading: THREE.FlatShading,
				metalness: 0,
				roughness: 1,
			});
			var object1 = new THREE.Mesh(geometry1, material1);
			object1.position.y += 3;
			// make obj1 shadow receivable
			object1.castShadow = true;
			object1.receiveShadow = true;

			// OBJECT2
			var geometry2 = new THREE.BoxGeometry(20, 2, 2);
			var material2 = new THREE.MeshStandardMaterial({
				color: 0xff0051,
				shading: THREE.FlatShading,
				metalness: 0,
				roughness: 1,
			});
			var object2 = new THREE.Mesh(geometry2, material2);
			object2.position.y += 3;
			object2.position.x += 0;
			object2.position.z += 14;

			// make obj1 shadow receivable
			object2.castShadow = true;
			object2.receiveShadow = true;

			// LIGHTS
			// ambivalent light
			var ambientLight = new THREE.AmbientLight(
				0xffffff,
				0.2
			);
			// point light
			var pointLight = new THREE.PointLight(0xffffff, 1);
			pointLight.position.set(25, 50, 25);

			// SHADOWING
			pointLight.castShadow = true;
			pointLight.shadow.mapSize.width = 1024;
			pointLight.shadow.mapSize.height = 1024;

			var shadowMaterial = new THREE.ShadowMaterial({
				color: 0xeeeeee,
			});
			shadowMaterial.opacity = 0.5;

			// ADDING ALL OBJECTS TO THE SCENE
			scene.add(cube);
			scene.add(plane);
			scene.add(object1);
			scene.add(object2);
			scene.add(ambientLight);
			scene.add(pointLight);

			renderer.render(scene, camera);
		</script>
	</body>
</html>
